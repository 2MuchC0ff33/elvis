# Seek pagination configuration template
# Purpose: Centralise pagination detection and iteration parameters for Seek.com.au
# Place this file under configs/ and do not commit secrets here.

[global]
# Network & timing
timeout = 15            # seconds for curl connection/read timeouts
retries = 3             # number of fetch retries on failure
# Backoff sequence in seconds (comma-separated). Used across retry attempts.
backoff_sequence = 5,20,60
# Randomised per-request delay range (seconds): used between consecutive page fetches
delay_min = 1.2
delay_max = 4.8
# Safety limits
max_pages = 200         # maximum page iterations to avoid runaway loops
max_offset = 10000      # maximum offset (start) to avoid runaway loops
# Behaviour flags
obey_robots = true      # honour robots.txt (set to false only after review)
log_level = INFO        # DEBUG|INFO|WARN|ERROR


[pagination]
# Seek has two pagination models (see README): offset-based and page-numbered.
# Offset/chunk size used in Seek search results for /jobs? routes
offset_step = 22
offset_param = start    # query parameter name for offset (e.g. start=0,22,...)
# Page-number parameter for category/region routes
page_param = page       # query parameter name for page number (e.g. ?page=2)
# Default model to use when detection is ambiguous: PAG_START or PAG_PAGE
default_model = PAG_START

# Pattern detection (basic substring match or regex; implementer can choose)
# If url contains any of the following substrings, the corresponding model is used.
detect_offset_contains = /jobs? , /jobs&
detect_page_contains = -jobs/in-

# HTML signal used to detect "Next" pagination control. Prefer stable automation attributes.
# Typical example in Seek: <span data-automation="page-next">Next</span>
page_next_marker = data-automation="page-next"


[selectors]
# Markers used to identify job cards and fields in a listing page
# Prefer data-automation attributes (stable) over CSS classes.
listing_root = data-automation="normalJob"
job_title = data-automation="jobTitle"
job_company = data-automation="jobCompany"
job_location = data-automation="jobLocation"
job_summary = data-automation="jobShortDescription"


[examples]
# Example usage (illustrative only; automation should assemble URLs):
# 1) Offset-based search seed:
#    https://www.seek.com.au/jobs?keywords=admin&where=Perth%2C+WA
#    -> iterate with &start=0, &start=22, &start=44 ... until page_next_marker absent
# 2) Page-numbered seed (category/region):
#    https://www.seek.com.au/software-developer-jobs/in-Perth-WA
#    -> iterate with ?page=2, ?page=3 ... until page_next_marker absent

# Implementation notes:
# - Use pick_pagination(url) to choose between PAG_START and PAG_PAGE according to
#   detect_* values above (see README for PDL logic).
# - Respect randomised delays and backoff_sequence on failures.
# - Stop iterating when either the page_next_marker is not found or safety limits reached.
# - Adjust values here if Seek changes their markup or pagination behaviour.


[overrides]
# Per-seed override examples. Keys should be a short identifier (used by automation)
# and map to per-seed settings that override global values. Comments show examples.
# Implementers may parse this section and apply the overrides when running seeds.

# Example: generic search seed (offset-based)
# seed: seek_admin_perth
# seed_url = https://www.seek.com.au/jobs?keywords=admin&where=Perth%2C+WA
# model = PAG_START
# offset_param = start
# offset_step = 22
# page_next_marker = data-automation="page-next"

# Example: category/region (page-numbered)
# seed: seek_swdev_perth
# seed_url = https://www.seek.com.au/software-developer-jobs/in-Perth-WA
# model = PAG_PAGE
# page_param = page
# page_next_marker = data-automation="page-next"

# Example: seed with a slightly different selector (if Seek variant changes)
# seed: seek_variant_example
# seed_url = https://www.seek.com.au/example-jobs/in-Somewhere
# model = PAG_PAGE
# page_param = page
# listing_root = data-automation="normalJob"  # override if needed
# job_title = data-automation="jobTitle"      # override if needed

# Notes:
# - When present, per-seed settings override the equivalent keys in [global], [pagination],
#   and [selectors].
# - Use seed identifiers in your seed manifest (e.g., seeds/seeds.csv) to reference overrides.
# - This section is intentionally human-readable and commented; automation should support
#   simple parsing of uncommented key=value pairs if you choose to enable structured overrides.

